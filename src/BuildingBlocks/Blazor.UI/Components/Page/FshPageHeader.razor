@using MudBlazor

<PageTitle>@PageTitleText</PageTitle>

<div class="fsh-page-header-wrapper">
    <MudPaper Class="@CombinedClass" Elevation="2">
        <MudStack Row="true" Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center" Class="flex-wrap">
            <MudStack Spacing="1">
                <MudText Typo="@TitleTypo" Class="fw-700">@Title</MudText>
                @if (!string.IsNullOrWhiteSpace(Description))
                {
                    <MudText Typo="Typo.body2" Class="text-muted">
                        @Description
                    </MudText>
                }
                @if (DescriptionContent != null)
                {
                    <MudText Typo="Typo.body2" Class="text-muted">
                        @DescriptionContent
                    </MudText>
                }
            </MudStack>
            @if (ActionContent != null)
            {
                <MudStack Row="true" Spacing="2" AlignItems="AlignItems.Center">
                    @ActionContent
                </MudStack>
            }
        </MudStack>
    </MudPaper>
</div>

@code {
    /// <summary>
    /// The main title of the page header
    /// </summary>
    [Parameter, EditorRequired]
    public string Title { get; set; } = string.Empty;

    /// <summary>
    /// Optional description text below the title
    /// </summary>
    [Parameter]
    public string? Description { get; set; }

    /// <summary>
    /// Optional render fragment for complex description content
    /// </summary>
    [Parameter]
    public RenderFragment? DescriptionContent { get; set; }

    /// <summary>
    /// Optional action buttons/controls rendered on the right side
    /// </summary>
    [Parameter]
    public RenderFragment? ActionContent { get; set; }

    /// <summary>
    /// Typography style for the title. Default is h5.
    /// </summary>
    [Parameter]
    public Typo TitleTypo { get; set; } = Typo.h5;

    /// <summary>
    /// Additional CSS classes to apply
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    /// <summary>
    /// Optional suffix for the browser page title (e.g., app name).
    /// When set, displays as "Title | Suffix". When null, displays only the Title.
    /// </summary>
    [Parameter]
    public string? PageTitleSuffix { get; set; }

    /// <summary>
    /// Allows passing additional attributes
    /// </summary>
    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private string PageTitleText => string.IsNullOrWhiteSpace(PageTitleSuffix)
        ? Title
        : $"{Title} | {PageTitleSuffix}";

    private string CombinedClass
    {
        get
        {
            var baseClass = "fsh-page-header pa-5 mb-4";
            return string.IsNullOrWhiteSpace(Class) ? baseClass : $"{baseClass} {Class}";
        }
    }
}
